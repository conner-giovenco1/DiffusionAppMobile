{"version":3,"names":["RNGoogleSignin","NativeModules","IS_IOS","Platform","OS","GoogleSignin","constructor","__DEV__","console","error","signIn","options","configPromise","hasPlayServices","showPlayServicesUpdateDialog","undefined","Error","playServicesAvailable","configure","offlineAccess","webClientId","addScopes","isSignedIn","getCurrentUser","signInSilently","signOut","revokeAccess","clearCachedAccessToken","tokenString","Promise","reject","getTokens","tokens","userObject","idToken","accessToken","GoogleSigninSingleton","statusCodes","SIGN_IN_CANCELLED","IN_PROGRESS","PLAY_SERVICES_NOT_AVAILABLE","SIGN_IN_REQUIRED"],"sources":["GoogleSignin.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\nimport type {\n  AddScopesParams,\n  SignInParams,\n  ConfigureParams,\n  HasPlayServicesParams,\n  User,\n} from './types';\n\nconst { RNGoogleSignin } = NativeModules;\n\nconst IS_IOS = Platform.OS === 'ios';\n\nclass GoogleSignin {\n  configPromise?: Promise<void>;\n\n  constructor() {\n    if (__DEV__ && !RNGoogleSignin) {\n      console.error(\n        `RN GoogleSignin native module is not correctly linked. Please read the readme, setup and troubleshooting instructions carefully or try manual linking.`,\n      );\n    }\n  }\n\n  async signIn(options: SignInParams = {}): Promise<User> {\n    await this.configPromise;\n    return await RNGoogleSignin.signIn(options);\n  }\n\n  async hasPlayServices(\n    options: HasPlayServicesParams = { showPlayServicesUpdateDialog: true },\n  ): Promise<boolean> {\n    if (IS_IOS) {\n      return true;\n    } else {\n      if (options && options.showPlayServicesUpdateDialog === undefined) {\n        throw new Error(\n          'RNGoogleSignin: Missing property `showPlayServicesUpdateDialog` in options object for `hasPlayServices`',\n        );\n      }\n      return RNGoogleSignin.playServicesAvailable(options.showPlayServicesUpdateDialog);\n    }\n  }\n\n  configure(options: ConfigureParams = {}): void {\n    if (options.offlineAccess && !options.webClientId) {\n      throw new Error('RNGoogleSignin: offline use requires server web ClientID');\n    }\n\n    this.configPromise = RNGoogleSignin.configure(options);\n  }\n\n  async addScopes(options: AddScopesParams): Promise<User | null> {\n    const isSignedIn = await this.isSignedIn();\n    if (!isSignedIn) {\n      return null;\n    }\n    return IS_IOS ? RNGoogleSignin.addScopes(options) : RNGoogleSignin.getCurrentUser();\n  }\n\n  async signInSilently(): Promise<User> {\n    await this.configPromise;\n    return RNGoogleSignin.signInSilently();\n  }\n\n  async signOut(): Promise<null> {\n    return RNGoogleSignin.signOut();\n  }\n\n  async revokeAccess(): Promise<null> {\n    return RNGoogleSignin.revokeAccess();\n  }\n\n  async isSignedIn(): Promise<boolean> {\n    return RNGoogleSignin.isSignedIn();\n  }\n\n  async getCurrentUser(): Promise<User | null> {\n    return RNGoogleSignin.getCurrentUser();\n  }\n\n  async clearCachedAccessToken(tokenString: string): Promise<null> {\n    if (!tokenString || typeof tokenString !== 'string') {\n      return Promise.reject('GoogleSignIn: clearCachedAccessToken() expects a string token.');\n    }\n    return IS_IOS ? null : await RNGoogleSignin.clearCachedAccessToken(tokenString);\n  }\n\n  async getTokens(): Promise<{ idToken: string; accessToken: string }> {\n    if (IS_IOS) {\n      const tokens = await RNGoogleSignin.getTokens();\n      return tokens;\n    } else {\n      const userObject = await RNGoogleSignin.getTokens();\n      return {\n        idToken: userObject.idToken,\n        accessToken: userObject.accessToken,\n      };\n    }\n  }\n}\n\nexport const GoogleSigninSingleton = new GoogleSignin();\n\nexport const statusCodes = {\n  SIGN_IN_CANCELLED: RNGoogleSignin.SIGN_IN_CANCELLED as string,\n  IN_PROGRESS: RNGoogleSignin.IN_PROGRESS as string,\n  PLAY_SERVICES_NOT_AVAILABLE: RNGoogleSignin.PLAY_SERVICES_NOT_AVAILABLE as string,\n  SIGN_IN_REQUIRED: RNGoogleSignin.SIGN_IN_REQUIRED as string,\n} as const;\n"],"mappings":"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"}